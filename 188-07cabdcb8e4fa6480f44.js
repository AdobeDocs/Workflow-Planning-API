"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[188],{51188:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var o,r,i,s,c,a=t(88763),l=t(28007),d=t(68424);!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(o||(o={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(r||(r={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(i||(i={})),function(e){e.DataCloneError="DataCloneError"}(s||(s={})),function(e){e.Message="message"}(c||(c={}));const u={"http:":"80","https:":"443"},g=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,f=["file:","data:"];const m=({name:e,message:n,stack:t})=>({name:e,message:n,stack:t});let h=0;var p=()=>++h;const v=e=>e?e.split("."):[],w=(e,n,t)=>{const o=v(n);return o.reduce(((e,n,r)=>(void 0===e[n]&&(e[n]={}),r===o.length-1&&(e[n]=t),e[n])),e),e},y=(e,n)=>{const t={};return Object.keys(e).forEach((o=>{const r=e[o],i=((e,n)=>{const t=v(n||"");return t.push(e),(e=>e.join("."))(t)})(o,n);"object"==typeof r&&Object.assign(t,y(r,i)),"function"==typeof r&&(t[i]=r)})),t};var $=(e,n,t,s,a)=>{const{localName:l,local:d,remote:u,originForSending:g,originForReceiving:f}=n;let m=!1;a(`${l}: Connecting call sender`);const h=e=>(...n)=>{let t;a(`${l}: Sending ${e}() call`);try{u.closed&&(t=!0)}catch(h){t=!0}if(t&&s(),m){const n=new Error(`Unable to send ${e}() call due to destroyed connection`);throw n.code=i.ConnectionDestroyed,n}return new Promise(((t,i)=>{const s=p(),m=n=>{if(n.source!==u||n.data.penpal!==o.Reply||n.data.id!==s)return;if("*"!==f&&n.origin!==f)return void a(`${l} received message from origin ${n.origin} which did not match expected origin ${f}`);const g=n.data;a(`${l}: Received ${e}() reply`),d.removeEventListener(c.Message,m);let h=g.returnValue;g.returnValueIsError&&(h=(e=>{const n=new Error;return Object.keys(e).forEach((t=>n[t]=e[t])),n})(h)),(g.resolution===r.Fulfilled?t:i)(h)};d.addEventListener(c.Message,m);const h={penpal:o.Call,id:s,methodName:e,args:n};u.postMessage(h,g)}))},v=t.reduce(((e,n)=>(e[n]=h(n),e)),{});return Object.assign(e,(e=>{const n={};for(const t in e)w(n,t,e[t]);return n})(v)),()=>{m=!0}},S=(e,n,t,i,a)=>{const{destroy:l,onDestroy:d}=i;let u,g;const f={};return i=>{if("*"!==n&&i.origin!==n)return void a(`Parent: Handshake - Received ACK message from origin ${i.origin} which did not match expected origin ${n}`);a("Parent: Handshake - Received ACK");const h={localName:"Parent",local:window,remote:i.source,originForSending:t,originForReceiving:n};u&&u(),u=((e,n,t)=>{const{localName:i,local:a,remote:l,originForSending:d,originForReceiving:u}=e;let g=!1;const f=e=>{if(e.source!==l||e.data.penpal!==o.Call)return;if("*"!==u&&e.origin!==u)return void t(`${i} received message from origin ${e.origin} which did not match expected origin ${u}`);const c=e.data,{methodName:a,args:f,id:h}=c;t(`${i}: Received ${a}() call`);const p=e=>n=>{if(t(`${i}: Sending ${a}() reply`),g)return void t(`${i}: Unable to send ${a}() reply due to destroyed connection`);const c={penpal:o.Reply,id:h,resolution:e,returnValue:n};e===r.Rejected&&n instanceof Error&&(c.returnValue=m(n),c.returnValueIsError=!0);try{l.postMessage(c,d)}catch(u){if(u.name===s.DataCloneError){const e={penpal:o.Reply,id:h,resolution:r.Rejected,returnValue:m(u),returnValueIsError:!0};l.postMessage(e,d)}throw u}};new Promise((e=>e(n[a].apply(n,f)))).then(p(r.Fulfilled),p(r.Rejected))};return a.addEventListener(c.Message,f),()=>{g=!0,a.removeEventListener(c.Message,f)}})(h,e,a),d(u),g&&g.forEach((e=>{delete f[e]})),g=i.data.methodNames;const p=$(f,h,g,l,a);return d(p),f}};var E=e=>{let{iframe:n,methods:t={},childOrigin:r,timeout:s,debug:a=!1}=e;const l=(e=>(...n)=>{e&&console.log("[Penpal]",...n)})(a),d=((e,n)=>{const t=[];let o=!1;return{destroy(r){o||(o=!0,n(`${e}: Destroying connection`),t.forEach((e=>{e(r)})))},onDestroy(e){o?e():t.push(e)}}})("Parent",l),{onDestroy:m,destroy:h}=d;r||((e=>{if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=i.NoIframeSrc,e}})(n),r=(e=>{if(e&&f.find((n=>e.startsWith(n))))return"null";const n=document.location,t=g.exec(e);let o,r,i;return t?(o=t[1]?t[1]:n.protocol,r=t[2],i=t[4]):(o=n.protocol,r=n.hostname,i=n.port),`${o}//${r}${i&&i!==u[o]?`:${i}`:""}`})(n.src));const p="null"===r?"*":r,v=y(t),w=((e,n,t,r)=>i=>{if(!i.source)return;if("*"!==t&&i.origin!==t)return void e(`Parent: Handshake - Received SYN message from origin ${i.origin} which did not match expected origin ${t}`);e("Parent: Handshake - Received SYN, responding with SYN-ACK");const s={penpal:o.SynAck,methodNames:Object.keys(n)};i.source.postMessage(s,r)})(l,v,r,p),$=S(v,r,p,d,l),E=new Promise(((e,t)=>{const r=((e,n)=>{let t;return void 0!==e&&(t=window.setTimeout((()=>{const t=new Error(`Connection timed out after ${e}ms`);t.code=i.ConnectionTimeout,n(t)}),e)),()=>{clearTimeout(t)}})(s,h),a=t=>{if(t.source===n.contentWindow&&t.data)if(t.data.penpal!==o.Syn)if(t.data.penpal!==o.Ack);else{const n=$(t);n&&(r(),e(n))}else w(t)};window.addEventListener(c.Message,a),l("Parent: Awaiting handshake"),((e,n)=>{const{destroy:t,onDestroy:o}=n,r=setInterval((()=>{e.isConnected||(clearInterval(r),t())}),6e4);o((()=>{clearInterval(r)}))})(n,d),m((e=>{window.removeEventListener(c.Message,a),e&&t(e)}))}));return{promise:E,destroy(){h()}}};var k=t(78237),I=t(91101),C=t(89745),R=function(e){var n,t=e.src,o=e.height,r=void 0===o?"calc(100vh - var(--spectrum-global-dimension-size-800))":o,i=e.location,s=(0,a.useRef)(null),c=(0,a.useContext)(I.Ay),u=(c.ims,c.isLoadingIms),g=(0,a.useState)(null),f=g[0],m=g[1],h=(0,a.useState)(!1),p=h[0],v=h[1];(0,a.useEffect)((function(){f&&(0===s.current.clientHeight?f.onHide():f.onShow())}),[i.pathname]),(0,a.useEffect)((function(){if(v(!1),null!=s&&!u){n=window.adobeIMS;var e=y();return function(){e.destroy()}}}),[s,u]);var w=(0,C.i9)(t)?t:(0,l.Fe)(t),y=function(){var e=E({iframe:s.current,childOrigin:(0,C.i9)(t)?new URL(t).origin:window.origin,methods:{scrollTop:function(e){var n;void 0===e&&(e=0),null!==(n=document)&&void 0!==n&&n.scrollingElement&&(document.scrollingElement.scrollTop=e)},getURL:function(){var e,n;return null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href},setURL:function(e){var n;null!==(n=window)&&void 0!==n&&n.location&&(window.location=e)},setHeight:function(e){s.current.style.height=e},getIMSAccessToken:function(){var e;return null!==(e=n)&&void 0!==e&&e.isSignedInUser()?n.getAccessToken():null},getIMSProfile:function(){var e;return null!==(e=n)&&void 0!==e&&e.isSignedInUser()?n.getProfile():null},signIn:function(){n&&!n.isSignedInUser()&&n.signIn()},signOut:function(){n&&n.isSignedInUser()&&n.signOut()},getIMSClientId:function(){return n?n.adobeIdData.client_id:null}}});return e.promise.then((function(e){0===s.current.clientHeight?e.onHide():e.onShow(),m(e)})),v(!0),e};return(0,d.Y)(a.default.Fragment,null,(0,d.Y)("iframe",{title:"Main content",ref:s,src:p?w:"",css:(0,d.AH)("display:block;height:",r,";width:100%;border:none;","")}),(0,d.Y)(k.w,null))}}}]);
//# sourceMappingURL=188-07cabdcb8e4fa6480f44.js.map